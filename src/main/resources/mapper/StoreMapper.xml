<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.example.demo.src.store.mapper.StoreMapper">

    <!-- 모든 음식점을 조회하는 쿼리 -->
    <select id="getAllStores" resultType="com.example.demo.src.store.model.Store">
        SELECT
            store_id, store_name, store_address, category, like_count
        FROM store
    </select>

    <select id="getStoreById" parameterType="int" resultType="com.example.demo.src.store.model.Store">
        SELECT
            store_id, store_name, store_address, category, like_count
        FROM store
        WHERE store_id = #{storeId}
    </select>

    <select id="getStoresByCategory" parameterType="String" resultType="com.example.demo.src.store.dto.StoreResponse">
        SELECT * FROM store WHERE category = #{category}
    </select>

    <insert id="addStore" parameterType="com.example.demo.src.store.model.Store">
        INSERT INTO store (store_name, store_address, category)
        VALUES (#{storeName}, #{storeAddress}, #{category})
    </insert>

    <update id="updateStore" parameterType="com.example.demo.src.store.model.Store">
        UPDATE store
        <trim prefix="SET" suffixOverrides=",">
            <if test="storeName != null">
            store_name = #{storeName},
            </if>
            <if test="storeAddress != null">
            store_address = #{storeAddress},
            </if>
            <if test="category != null">
            category = #{category}
            </if>
        </trim>
        WHERE store_id = #{storeId}
    </update>

    <delete id="deleteStore"  parameterType="long">
        DELETE FROM store
        WHERE store_id = #{id}
    </delete>
</mapper>